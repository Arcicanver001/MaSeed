# Mosquitto Configuration for Smart Greenhouse Dashboard
# Copy this to your Mosquitto installation directory
# Windows: C:\Program Files\mosquitto\mosquitto.conf
# Linux: /etc/mosquitto/mosquitto.conf

# Allow persistent messages
persistence true
persistence_location /var/lib/mosquitto/

# Log settings
log_dest file /var/log/mosquitto/mosquitto.log
log_type all

# Standard MQTT port for ESP32
listener 1883
protocol mqtt

# WebSocket port for browser dashboard
listener 9001
protocol websockets

# Authentication settings
# Option 1: Use authentication (recommended)
allow_anonymous false
password_file /etc/mosquitto/passwd

# Option 2: Allow anonymous (for testing only)
# allow_anonymous true

# Security settings (optional but recommended)
# max_connections -1
# max_queued_messages 1000

# Message size limits
message_size_limit 0

# Persistent client expiration
persistent_client_expiration 1h

# --- Windows Specific Paths ---
# If on Windows, uncomment and adjust these paths:
# persistence_location C:\Program Files\mosquitto\data\
# log_dest file C:\Program Files\mosquitto\log\mosquitto.log
# password_file C:\Program Files\mosquitto\passwd

# --- To create password file: ---
# Windows:
#   cd "C:\Program Files\mosquitto"
#   mosquitto_passwd -c passwd myuser
#   (enter password: *smart2025!)
#
# Linux:
#   sudo mosquitto_passwd -c /etc/mosquitto/passwd myuser
#   (enter password: *smart2025!)

# --- To apply configuration: ---
# Windows:
#   net stop mosquitto
#   net start mosquitto
#
# Linux:
#   sudo systemctl restart mosquitto
#   sudo systemctl enable mosquitto

